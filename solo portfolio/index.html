<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JREdesign - Portfolio</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ["Inter", "sans-serif"] },
            backgroundImage: {
              "cotton-candy":
                "linear-gradient(to right, #f472b6 0%, #60a5fa 15%, #fff5fa 35%, #fff5fa 65%, #60a5fa 85%, #f472b6 100%)",
            },
            animation: { shine: "shine 6s linear infinite" },
            keyframes: {
              shine: {
                "0%": { backgroundPosition: "200% center" },
                "100%": { backgroundPosition: "-200% center" },
              },
            },
          },
        },
      };
    </script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap");
      body {
        background-color: #09090b;
        color: white;
        font-family: "Inter", sans-serif;
        -webkit-font-smoothing: antialiased;
      }
      .bg-grid-pattern {
        background-image: radial-gradient(#52525b 1px, transparent 1px);
        background-size: 32px 32px;
      }
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #09090b;
      }
      ::-webkit-scrollbar-thumb {
        background: #27272a;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #3f3f46;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script src="consts.js"></script>

    <script type="text/babel">
      const { useState, useEffect, useMemo } = React;
      const ITEMS_PER_PAGE = 6;

      const Section = ({ id, title, children, titleCenter = true }) => (
        <section
          id={id}
          className="min-h-screen flex flex-col items-center justify-center relative z-20 px-6 py-24"
        >
          <div className="max-w-7xl w-full mx-auto">
            <h2
              className={`text-5xl md:text-7xl font-extrabold mb-12 flex items-center gap-4 ${
                titleCenter ? "justify-center" : ""
              } bg-clip-text text-transparent bg-cotton-candy animate-shine bg-[length:200%_auto]`}
            >
              <span className="w-12 h-1 bg-blue-500 rounded-full hidden md:block" />
              {title}
            </h2>
            <div className="text-zinc-400 text-lg leading-relaxed w-full">
              {children}
            </div>
          </div>
        </section>
      );

      const ImageZoom = ({ src, onClose }) => {
        if (!src) return null;
        return (
          <div
            className="fixed inset-0 z-[60] bg-black/95 flex items-center justify-center p-4 backdrop-blur-md animate-[fadeIn_0.2s_ease-out]"
            onClick={onClose}
          >
            <button
              onClick={onClose}
              className="absolute top-5 right-5 text-white/50 hover:text-white text-4xl"
            >
              &times;
            </button>
            <img
              src={src}
              className="max-w-full max-h-[95vh] object-contain rounded-lg shadow-2xl"
              onClick={(e) => e.stopPropagation()}
            />
          </div>
        );
      };

      const ProjectModal = ({ project, onClose }) => {
        const [zoomedImg, setZoomedImg] = useState(null);

        useEffect(() => {
          const handleEsc = (e) => e.key === "Escape" && onClose();
          window.addEventListener("keydown", handleEsc);
          document.body.style.overflow = "hidden";
          return () => {
            window.removeEventListener("keydown", handleEsc);
            document.body.style.overflow = "";
          };
        }, []);

        if (!project) return null;

        return (
          <>
            <div className="fixed inset-0 z-50 flex items-center justify-center p-2 md:p-4">
              <div
                className="absolute inset-0 bg-black/90 backdrop-blur-sm transition-opacity"
                onClick={onClose}
              ></div>

              <div className="relative w-full max-w-[95vw] h-[90vh] md:h-[95vh] flex flex-col bg-zinc-950 border border-zinc-800 rounded-xl shadow-2xl overflow-hidden animate-[fadeIn_0.3s_ease-out]">
                <button
                  onClick={onClose}
                  className="absolute top-4 right-4 z-20 w-12 h-12 rounded-full bg-black/60 hover:bg-white/10 text-white flex items-center justify-center transition-all text-xl"
                >
                  ✕
                </button>

                <div className="overflow-y-auto h-full scroll-smooth">
                  <div className="w-full h-[50vh] md:h-[65vh] relative shrink-0">
                    <img
                      src={project.image}
                      alt={project.title}
                      className="w-full h-full object-cover"
                    />
                    <div className="absolute inset-0 bg-gradient-to-t from-zinc-950 via-transparent to-transparent opacity-90"></div>

                    <div className="absolute bottom-0 left-0 w-full p-8 md:p-12">
                      <span className="inline-flex items-center gap-1.5 px-3 py-1 mb-3 text-xs font-bold tracking-widest text-blue-400 uppercase bg-blue-500/10 border border-blue-500/20 rounded-full">
                        <span className="w-1.5 h-1.5 rounded-full bg-blue-500"></span>
                        {project.tag}
                      </span>

                      <div className="text-sm font-medium text-zinc-400 uppercase tracking-wider mb-2 opacity-80">
                        {project.categories.join(" | ")}
                      </div>

                      <h3 className="text-4xl md:text-6xl font-bold text-white mb-2">
                        {project.title}
                      </h3>
                      <p className="text-xl md:text-2xl text-zinc-300 font-light">
                        {project.subtitle}
                      </p>
                    </div>
                  </div>

                  <div className="p-8 md:p-12 max-w-7xl mx-auto">
                    <div className="mb-10">
                      <h4 className="text-sm uppercase tracking-wider text-zinc-500 mb-4 font-bold">
                        Sobre el proyecto
                      </h4>
                      <p
                        className="text-zinc-300 text-lg md:text-xl leading-relaxed max-w-4xl"
                        style={{ whiteSpace: "pre-line" }}
                      >
                        {project.description ||
                          "Sin descripción detallada disponible."}
                      </p>
                    </div>

                    <div className="mb-12">
                      <h4 className="text-sm uppercase tracking-wider text-zinc-500 mb-4 font-bold">
                        Diseño y acabado
                      </h4>
                      <p
                        className="text-zinc-300 text-lg md:text-xl leading-relaxed max-w-4xl"
                        style={{ whiteSpace: "pre-line" }}
                      >
                        {project.details || "Detalles de diseño no disponibles."}
                      </p>
                    </div>

                    {project.gallery && project.gallery.length > 0 && (
                      <div>
                        <h4 className="text-sm uppercase tracking-wider text-zinc-500 mb-6 font-bold">
                          Galería (Clic para ampliar)
                        </h4>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
                          {project.gallery.map((img, idx) => (
                            <div
                              key={idx}
                              className="group relative aspect-square rounded-lg overflow-hidden cursor-zoom-in bg-zinc-900 border border-zinc-800"
                              onClick={() => setZoomedImg(img)}
                            >
                              <img
                                src={img}
                                className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                              />
                              <div className="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"></div>
                            </div>
                          ))}
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              </div>
            </div>

            <ImageZoom src={zoomedImg} onClose={() => setZoomedImg(null)} />
          </>
        );
      };

      const App = () => {
        const [activeCategory, setActiveCategory] = useState("all");
        const [currentPage, setCurrentPage] = useState(1);
        const [selectedProject, setSelectedProject] = useState(null);

        const projects = window.JRE_PROJECTS || [];

        useEffect(() => setCurrentPage(1), [activeCategory]);

        const categories = useMemo(
          () => ["all", ...new Set(projects.flatMap((p) => p.categories || []))],
          [projects]
        );

        const filteredProjects = useMemo(
          () =>
            activeCategory === "all"
              ? projects
              : projects.filter(
                  (p) => p.categories && p.categories.includes(activeCategory)
                ),
          [activeCategory, projects]
        );

        const totalPages = Math.ceil(filteredProjects.length / ITEMS_PER_PAGE);
        const currentProjects = filteredProjects.slice(
          (currentPage - 1) * ITEMS_PER_PAGE,
          currentPage * ITEMS_PER_PAGE
        );

        const handlePageChange = (page) => {
          setCurrentPage(page);
          document
            .getElementById("portfolio-grid-anchor")
            ?.scrollIntoView({ behavior: "smooth", block: "start" });
        };

        return (
          <div className="relative bg-zinc-950 min-h-screen selection:bg-blue-500/30">
            <div className="fixed inset-0 z-0 opacity-20 pointer-events-none bg-grid-pattern" />
            <div className="fixed inset-0 z-0 bg-[radial-gradient(circle_at_center,transparent_0%,#09090b_100%)] pointer-events-none" />

            <main className="relative z-10">
              <Section id="portfolio" title="Portfolio" titleCenter={false}>
                <div id="portfolio-grid-anchor" className="h-0"></div>

                <div className="flex flex-wrap gap-3 mb-10">
                  {categories.map((cat) => (
                    <button
                      key={cat}
                      onClick={() => setActiveCategory(cat)}
                      className={`px-5 py-2 rounded-full text-sm font-medium transition-all duration-300 border ${
                        activeCategory === cat
                          ? "bg-zinc-100 text-zinc-900 border-white scale-105 shadow-lg shadow-white/10"
                          : "bg-zinc-900/50 text-zinc-400 border-zinc-800 hover:border-zinc-600 hover:text-white"
                      }`}
                    >
                      {cat === "all"
                        ? "Todos"
                        : cat.charAt(0).toUpperCase() + cat.slice(1)}
                    </button>
                  ))}
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-8 min-h-[50vh]">
                  {currentProjects.map((project) => (
                    <div
                      key={project.id}
                      onClick={() => setSelectedProject(project)}
                      className="group relative aspect-[4/3] bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden cursor-pointer hover:border-blue-500/30 transition-all duration-500 hover:-translate-y-2 hover:shadow-[0_20px_40px_-15px_rgba(0,0,0,0.7)]"
                    >
                      <img
                        src={project.image}
                        alt={project.title}
                        className="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                      />
                      <div className="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-80 group-hover:opacity-90 transition-opacity" />

                      <div className="absolute bottom-0 left-0 w-full p-6 flex flex-col justify-end items-start z-10">
                        <span className="inline-flex items-center gap-1.5 px-2 py-0.5 mb-2 rounded border border-zinc-600/50 bg-black/40 backdrop-blur-sm text-[10px] font-bold uppercase tracking-wider text-blue-300">
                          <span className="w-1.5 h-1.5 rounded-full bg-blue-500"></span>
                          {project.tag}
                        </span>
                        <h3 className="text-xl font-bold text-white mb-1 group-hover:text-blue-200 transition-colors">
                          {project.title}
                        </h3>
                        <p className="text-zinc-400 text-sm line-clamp-1">
                          {project.subtitle}
                        </p>
                      </div>
                    </div>
                  ))}
                </div>

                {filteredProjects.length === 0 && (
                  <p className="text-center text-zinc-600 mt-10">
                    No hay proyectos en esta categoría.
                  </p>
                )}

                {totalPages > 1 && (
                  <div className="flex justify-center items-center gap-2 mt-16">
                    <button
                      onClick={() => handlePageChange(currentPage - 1)}
                      disabled={currentPage === 1}
                      className="px-4 py-1.5 rounded-full text-sm font-medium border border-zinc-800 text-zinc-400 hover:text-white hover:border-zinc-600 disabled:opacity-30 disabled:hover:border-zinc-800 transition-all bg-zinc-900/50"
                    >
                      Anterior
                    </button>

                    {Array.from({ length: totalPages }, (_, i) => i + 1).map(
                      (page) => (
                        <button
                          key={page}
                          onClick={() => handlePageChange(page)}
                          className={`px-3 py-1 rounded-full text-sm font-medium min-w-[32px] transition-all border ${
                            currentPage === page
                              ? "bg-zinc-100 text-zinc-900 border-white shadow-lg shadow-white/10"
                              : "bg-zinc-900/50 text-zinc-400 border-zinc-800 hover:border-zinc-600 hover:text-white"
                          }`}
                        >
                          {page}
                        </button>
                      )
                    )}

                    <button
                      onClick={() => handlePageChange(currentPage + 1)}
                      disabled={currentPage === totalPages}
                      className="px-4 py-1.5 rounded-full text-sm font-medium border border-zinc-800 text-zinc-400 hover:text-white hover:border-zinc-600 disabled:opacity-30 disabled:hover:border-zinc-800 transition-all bg-zinc-900/50"
                    >
                      Siguiente
                    </button>
                  </div>
                )}
              </Section>
            </main>

            {selectedProject && (
              <ProjectModal
                project={selectedProject}
                onClose={() => setSelectedProject(null)}
              />
            )}
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
